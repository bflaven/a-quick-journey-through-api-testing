
##  A quick journey through API Testing - 004_folder_countries_api

We will both test the JSON-Schema and the existence of all values inside our JSON API using the --folder parameter in Postman. So the collection includes all the previous scripts: 001_flagapi_v2_flag, 002_flagapi_v2_get_all, 003_flagapi_v2_capital_check_all.

### Tools

To perform this test, you need to install Postman and Newman globally. Newman is a command line collection runner for Postman". Postman exist both for Mac, Linux and Windows.

* [Postman](https://www.getpostman.com/apps) - For the test's execution, essential.

The other tools that maybe useful:

* [JSONlint](https://jsonlint.com/) - To validate the output in JSON
* [JSONschema.net](https://jsonschema.net/) - To generate the JSON schema
* [JSON pathfinder](https://chrome.google.com/webstore/detail/json-pathfinder/cgpbbgjlljobcemhhimjknkldpinacpn) -A useful plug-in to make data selection among JSON easier ( Extension Chrome only)


### Presentation of the script directory

**1. JSON Files**
The tests fully leverage on Postman's abilities to handle sets of data, environments. These files are in JSON format.

**2. File names and extension**
The file names by its sole reading inform on the file type.
The extension has to be also taken into account.



Prefix  | Description | Extension | Example
------------- | ------------- | ------------- | -------------
newman_  | The Shell script that launch the test's script in Newman | .sh | newman_folder_countries_api.sh
README  | The readme file identical to this one | .md | README.md


**3. Directory**
The 3 main directories that contains each required JSON files to make the test working.

Name | Description
------------- | -------------
coll  | This directory contains collections exported from Postman
dat  | This directory contains sets of data sent to Postman
reports  | This directory will contain html files reports generated by Postman



**4. The Postman files**

* The collection file with the following extension (.postman_collection.json). This file contains the script that will be executed. In order to obtain the JSON file, you only have used the export function of Postman ex 004_folder_countries_api.postman_collection.json


Ex : 004_folder_countries_api.postman_collection.json

```
|-- 004_folder_countries_api
        |-- ...
        |-- coll
                |-- 004_folder_countries_api.postman_collection.json
```

* The data file with the following extension (.postman_sample_data.json). This file contains data that will read by the script.


Ex : dat_flagapi_v2_capital_check_all.postman_sample_data.json

```
|-- 004_folder_countries_api
        |-- ...
        |-- dat
                |-- dat_flagadi_v2_flag.postman_sample_data.json
                |-- dat_flagapi_v2_capital_check_all.postman_sample_data.json
                |-- dat_flagapi_v2_get_all.postman_sample_data.json
```

* The environment file with the following extension (.postman_environment.json) contains the principal variables executed by Postman.

Ex : env_folder_countries_api.postman_environment.json


```

|-- 004_folder_countries_api
        |-- ...
        |-- env
                |-- env_folder_countries_api.postman_environment.json
```

**5. Example of tree diagram for a test**

**The directory correspond to what is necessary to make the collection works in Newman ex 003_coll_flagapi_v2_capital_check_all.**

```

|-- 004_folder_countries_api
        |-- README.md
        |-- newman_folder_countries_api.sh
        |-- coll
                |-- 004_folder_countries_api.postman_collection.json
        |-- dat
                |-- dat_flagadi_v2_flag.postman_sample_data.json
                |-- dat_flagapi_v2_capital_check_all.postman_sample_data.json
                |-- dat_flagapi_v2_get_all.postman_sample_data.json
        |-- env
                |-- env_folder_countries_api.postman_environment.json
        |-- reports
                |-- newman-run-report-2018-11-26-16-52-06-078-0.html
                |-- etc....

```




### To execute a test

In order to launch the test, it exists 2 possibilities ranked by descending order in complexity:

1. Through the Postman's runner, it required to select the JSON files for the environment and the data.
2. Through the MAC console in launching directly the script Shell (.sh)

Note: You can eventually build a .app or a .bat. This executable will have only execute the task to launch the script in shell (.sh)

**To launch inside the MAC console**
```
cd /path_to_the_directory/004_folder_countries_api/
sh newman_folder_countries_api.sh

```


### Version

Everything is in the collection as we have gathered all the previous scripts: 001_flagapi_v2_flag, 002_flagapi_v2_get_all, 003_flagapi_v2_capital_check_all

